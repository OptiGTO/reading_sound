<!-- File: community/templates/community/index.html -->
{% extends "community/base.html" %}
{% load static %}

{% block title %}í™ˆ{% endblock %}

{% block content %}

<section class="section active" id="home-section">
  <h2>í™ˆ í™”ë©´</h2>
  <div class="post-bulletin-nav">
    <button class="btn hover-effect sub-link active" data-subsection="home-full-board">
      <i class="fas fa-th-large"></i> ì „ì²´
    </button>
    <button class="btn hover-effect sub-link" data-subsection="home-essay-board">
      <i class="fas fa-pencil-alt"></i> ì—ì„¸ì´
    </button>
    <button class="btn hover-effect sub-link" data-subsection="home-novel-board">
      <i class="fas fa-book"></i> ì†Œì„¤
    </button>
    <button class="btn hover-effect sub-link" data-subsection="home-poetry-board">
      <i class="fas fa-feather-alt"></i> ì‹œ
    </button>
    <button class="btn hover-effect sub-link" data-subsection="home-nonlit-board">
      <i class="fas fa-newspaper"></i> ë¹„ë¬¸í•™
    </button>
  </div>
  
  <div id="home-board-container">
    <!-- 1) ì „ì²´ ê²Œì‹œíŒ -->
    <section class="sub-section active" id="home-full-board">
      <h3>ì „ì²´ ê²Œì‹œíŒ</h3>
      <div class="home-grid-container">
        
        {% for book in books %}
        <div class="home-grid-item" 
             data-description="{{ book.description|default:'ì„¤ëª…ì´ ì—†ìŠµë‹ˆë‹¤.' }}"
             data-publisher="{{ book.publisher|default:'ì¶œíŒì‚¬ ì •ë³´ ì—†ìŒ' }}"
             data-pubdate="{{ book.pubdate|default:'ì¶œíŒì¼ ì •ë³´ ì—†ìŒ' }}"
             data-isbn="{{ book.isbn|default:'ISBN ì •ë³´ ì—†ìŒ' }}">
          <img src="{{ book.thumbnail_url|default_if_none:'path/to/default_image.png' }}" 
               alt="{{ book.title }}" 
               class="grid-image">
          <div class="grid-info">
            <h4>{{ book.title }}</h4>
            <p>{{ book.author }}</p>
          </div>
        </div>
        {% endfor %}
      </div>
    </section>

    <!-- 2) ì—ì„¸ì´ ê²Œì‹œíŒ -->

    <section class="sub-section" id="home-essay-board">
      <h3>ì—ì„¸ì´ ê²Œì‹œíŒ</h3>
        <div class="home-grid-container">
          
        </div>

      
    </section>

    <!-- 3) ì†Œì„¤ ê²Œì‹œíŒ -->
    <section class="sub-section" id="home-novel-board">
      <h3>ì†Œì„¤ ê²Œì‹œíŒ</h3>
      <div class="home-grid-container">
          
      </div>
        
      
    </section>

    <!-- 4) ì‹œ ê²Œì‹œíŒ -->
    <section class="sub-section" id="home-poetry-board">
      <h3>ì‹œ ê²Œì‹œíŒ</h3>
      <div class="home-grid-container">
          
      </div>
        
      
    </section>

    <!-- 5) ë¹„ë¬¸í•™ ê²Œì‹œíŒ -->
    <section class="sub-section" id="home-nonlit-board">
      <h3>ë¹„ë¬¸í•™ ê²Œì‹œíŒ</h3>
      <div class="home-grid-container">
          
      </div>
        
      </section>
    </section>
  </div> <!-- #home-board-container ë -->
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const cards = document.querySelectorAll('.home-grid-item');
  const rightSidebar = document.querySelector('.right-sidebar');
  const originalSidebarContent = rightSidebar.innerHTML;
  let hoverTimer; // í˜¸ë²„ íƒ€ì´ë¨¸ ë³€ìˆ˜

  cards.forEach(card => {
    card.addEventListener('mouseenter', () => {
      // 0.3ì´ˆ ë”œë ˆì´ í›„ ì‹¤í–‰
      hoverTimer = setTimeout(() => {
        rightSidebar.dataset.originalContent = rightSidebar.innerHTML;
        rightSidebar.innerHTML = `
          <h3>ğŸ“– ì±… ìƒì„¸ ì •ë³´</h3>
          <div class="book-detail">
            <p class="publisher"><strong>ì¶œíŒì‚¬:</strong> ${card.dataset.publisher}</p>
            <p class="pubdate"><strong>ì¶œíŒì¼:</strong> ${card.dataset.pubdate}</p>
            <p class="isbn"><strong>ISBN:</strong> ${card.dataset.isbn}</p>
            <p class="description"><strong>ì„¤ëª…:</strong> ${card.dataset.description}</p>
          </div>
        `;
        rightSidebar.classList.add('book-info-active', 'show');
      }, 300); // 300ms = 0.3ì´ˆ
    });
    
    card.addEventListener('mouseleave', () => {
      clearTimeout(hoverTimer); // íƒ€ì´ë¨¸ ì·¨ì†Œ
      rightSidebar.classList.remove('show');
      setTimeout(() => {
        if(rightSidebar.dataset.originalContent) {
          rightSidebar.innerHTML = rightSidebar.dataset.originalContent;
        }
        rightSidebar.classList.remove('book-info-active');
      }, 200); // ì‚¬ë¼ì§ˆ ë•Œ ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„
    });
  });
});
</script>

{% endblock %}